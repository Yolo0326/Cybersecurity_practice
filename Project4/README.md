# SM3的软件实现及优化
## SM3简介
SM3适用于商用密码应用中的数字签名和验证，是在SHA-256基础上改进实现的一种算法，其安全性和SHA-256相当。SM3和MD5的迭代过程类似，也采用Merkle-Damgard结构。消息分组长度为512位，摘要值长度为256位  
SM3具有抗碰撞性和抗第二原像性，适合高吞吐场景，在数字签名、数据完整性校验、区块链以及物联网方面都有应用。
## SM3基本原理
整个算法的执行过程可以概括成四个步骤：消息填充、消息扩展、迭代压缩、输出结果  
- 消息填充  
SM3的消息扩展步骤是以512位的数据分组作为输入的。因此，我们需要在一开始就把数据长度填充至512位的倍数。数据填充规则和MD5一样，具体步骤如下：  
1、先填充一个“1”，后面加上k个“0”。其中k是满足(n+1+k) mod 512 = 448的最小正整数。  
2、追加64位的数据长度。  
- 消息扩展  
SM3的迭代压缩步骤没有直接使用数据分组进行运算，而是使用这个步骤产生的132个消息字。概括来说，先将一个512位数据分组划分为16个消息字，并且作为生成的132个消息字的前16个。再用这16个消息字递推生成剩余的116个消息字。  
在最终得到的132个消息字中，前68个消息字构成数列{W_j}，后64个消息字构成数列{W'_j}，其中下标j从0开始计数。
- 迭代压缩  
SM3为Merkle-Damgard结构，使用消息扩展得到的消息字进行运算，由压缩函数对每个512位分组执行64轮非线性操作（包括位运算、模加等）。
- 输出结果  
将经过一系列压缩函数得到的八个向量拼接，生成256位的哈希值。
## SM3代码实现
